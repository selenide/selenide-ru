---
layout: post
title: "Вышла Selenide 5.21.0"
description: ""
category:
header-text: "Долой дубликаты!"
tags: []
---
{% include JB/setup %}

Добрый вечер!  

За окошком месяц май, а на экране релиз [Selenide 5.21.0](https://github.com/selenide/selenide/milestone/123?closed=1).


<br>
# Убрали повторные скриншоты и шаги в отчёте для цепочи локаторов

Большинство методов Селенида устроены так, что их можно вызвать несколько штук подряд, в одну строку. 
Это позволяет писать лаконичные тесты. 

Что-то вроде

```java
  $("table#id").$("tbody", 2).$("tr.active").$("td", 5)
    .shouldHave(text("Ну вот"))
    .click();
```

Правда, с ними была одна проблема. При падении такой проверки Селенид делал несколько скриншотов, а 
в отчёт (в т.ч. числе в аллюровский отчёт) добавлялось несколько шагов (один для `"table#id"`, второй для `"tbody"` и т.д.), 
хотя по сути это один шаг. 

Хоть это и некритично, мы эту неприятность убрали. Теперь селенид будет делать один скриншот, а в аллюр отчёте будет одна строка. 

См. [issue 1055](https://github.com/selenide/selenide/issues/1055) и [PR 1465](https://github.com/selenide/selenide/pull/1465).

NB! Для этого пришлось сделать приличный рефакторинг, и не исключено даже, что что-то могло сломаться. Сообщайте, будем реагировать!

<br>
# Добавили BrowserPerTestStrategyExtension 
... для перезапуска браузер после каждого теста. 

По умолчанию Селенид переиспользует браузер между тестами (в рамках одного потока). Это сделано для скорости. 
Мы предполагаем, что вы сами в начале теста позаботитьесь о том, чтобы обновить страницу, почистить данные и т.п. - ведь это зависит от каждого приложения. 

Если же вы очень хотите в каждом тесте использовать новый браузер, есть и такая возможность. 
В Селениде из коробки есть поддерджка для JUnit 4, JUnit 5 и TestNG. 

Но для JUnit5 у нас был только экстеншн для перезапуска браузера для каждого тестового класса (`@ExtendWith({BrowserStrategyExtension.class}`), но не тестового метода. 

А теперь появился экстенш, заполнивший эту нишу. Если прописать в ваших тестах `@ExtendWith({BrowserPerTestStrategyExtension.class}`, то в каждом тестовом методе будет использоваться новый браузер. 

Это сделает ваши тесты значительно медленнее, но иногда по-другому никак. 

См. [issue 1448](https://github.com/selenide/selenide/issues/1448)
Спасибо [Anton Aftakhov](https://github.com/simple-elf) за [PR 1450](https://github.com/selenide/selenide/pull/1450).

<br>
# Добавили метод $.hover() со сдвигом

В селениде давно есть метод `$("div#123").hover()` для наведения курсора мыши на нужный элемент. 
Этот метод двигает курсор к центру элемента, и на это не было возможности повлиять. 

Теперь же у нас появился метод `$.hover()` с параметром, позволяющим указать, на сколько пикселей от центра нужно сдвинуть курсор:

```java
  $("div#123").hover(withOffset(123, 122));
```

P.S. Кажется, этот сдвиг не всегда оказывается точным. У меня иногда курсор оказывался _примерно_ в этой позиции плюс-минус 30 пикселей. 
Делитесь, как у вас?

См. [issue 1447](https://github.com/selenide/selenide/issues/1447) и [PR 1461](https://github.com/selenide/selenide/pull/1461).

<br> 
# Обновились на WebDriverManager 4.4.3

Спасибо [Anil Kumar Reddy Gaddam](https://github.com/anilreddy)
за [PR 1464](https://github.com/selenide/selenide/pull/1464) 
 и [PR 1469](https://github.com/selenide/selenide/pull/1469).

<br>
# Обновились javadoc многих селенидовских методов
... касающийся ленивой загрузки и фразы "not recommended".

Теперь javadoc ведёт на эти две статьи в вики:
* [Lazy loading](https://github.com/selenide/selenide/wiki/Lazy-loading)
* [Not recommended](https://github.com/selenide/selenide/wiki/Do-not-use-getters-in-tests)

Внимание, неоднозначный контент.  
Возможно, вы захотите подискутировать.   
Так давайте подискутируем!  

См. [PR 1430](https://github.com/selenide/selenide/pull/1430)

<br>
# selenide-selenoid 1.1.2

Мы выпустили обновление [`selenide-selenoid:1.1.2`](https://github.com/selenide/selenide-selenoid/blob/main/CHANGELOG.md), в котором добавили поддержку BasicAuth при скачивании файлов из контейнера Selenoid.   
См. [issue 8](https://github.com/selenide/selenide-selenoid/issues/8) и [PR 9](https://github.com/selenide/selenide-selenoid/pull/9). 


<br>
# selenide-appium 1.6.5

Мы выпустили обновление [`selenide-appium:1.6.5`](https://github.com/selenide/selenide-appium/blob/master/CHANGELOG), в котором улучшили сообщения об ошибках пр падении тестов в iOS.  
См. [issue 54](https://github.com/selenide/selenide-appium/issues/54). 


<br>
# Ссылки

Что новенького мы нарыли на просторах сети:

* Открытые видеокурсы [Дневник тестировщика](https://www.youtube.com/channel/UCVE8_r0VkxUYjGd094sKc4g) - там и про селенид есть несколько выпусков.
* [Как e2e автотесты на Selenide помогают QA-команде при частых релизах](https://habr.com/ru/company/croc/blog/546430/)
* годный тред [как слезть с ЛКФ на Селенид](https://twitter.com/arthicl/status/1366598485252964360?s=20)   (ЛКФ = локальный кривой фреймворк)
* Пост [Write Concise Web Tests With Selenide for Java Projects](https://rieckpil.de/write-concise-web-tests-with-selenide-for-java-projects/) за авторством [Philip Riecks](https://github.com/rieckpil).
* Видео [Введение в Selenide](https://www.youtube.com/watch?v=T9xns1iMbPI) от него же
* Маленький видеоурок [Create Screenshots With Selenide](https://www.youtube.com/watch?v=XPUPirH1yMs) от него же
* Пример [Selenide+Serenity+JBehave](https://github.com/senpay/layered-test-framework-example-serenity-jbehave)
* Пример [Selenide+TestNG+ExtentReports](https://github.com/sergiomartins8/test-automation-bootstrap/tree/master/ui-tests)
* курс [Selenium и Selenide для начинающих](https://slifki.info/threads/sergei-semenov-selenium-i-selenide-dlja-nachinajuschix-automation-qa-qc-na-java-2020.85098/) (прикольно же!)

<br/>
## Немного статистики

Статистика скачиваний Selenide за апрель 2021:
<center>
  <img src="{{ BASE_PATH }}/images/2021/05/selenide.downloads.png" width="800"/>
</center>

Чуть-чуть не дотянули до 200 тысяч. 

<br/>

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
