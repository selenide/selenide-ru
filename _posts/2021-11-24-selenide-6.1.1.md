---
layout: post
title: "Вышла Selenide 6.1.1"
description: ""
category:
header-text: "Капабилятити"
tags: []
---
{% include JB/setup %}

<br>
# TERE HOMMIKUST!

<br>
Мы зарелизили [Selenide 6.1.1](https://github.com/selenide/selenide/milestone/141?closed=1).

В этом маленьком релизе мы исправили сразу пачку проблем с настройками браузеров.  
Они все всплыли после обновления на Selenium 4, в котором `ChromeOptions` и другие `Capabilities` были серьёзно переработаны.  

Ну вот, теперь мы погрузились в тему и разом все проблемы исправили. 


<br>
# Раннее обнаружение конфликтов
Если вы попытаетесь открыть хром с настройками файерфокса:
```java
Configuration.browser = "chrome";
Configuration.browserCapabilities.setCapability(FIREFOX_OPTIONS, new FirefoxOptions());
```
то Селенид версии 5.x ругался, а Селенид 6.0.x перестал ругаться. 
Теперь мы ругань восстановили, и вы снова увидите старое доброе 
> IllegalArgumentException: Conflicting browser name: 'chrome' vs. 'firefox'

См. [issue 1591](https://github.com/selenide/selenide/issues/1591) и [PR 1642](https://github.com/selenide/selenide/pull/1642).

<br>
# Слияние аргументов хрома

Если вы попытаетесь задать хрому, например, полноэкранный режим или язык:
```java
ChromeOptions options = new ChromeOptions();
options.addArguments("--start-fullscreen", "--start-incognito");
options.setExperimentalOption("prefs", ImmutableMap.of("intl.accept_languages", "de_DE"));
Configuration.browserCapabilities = chromeOptions;
open("https://codeborne.com";)
```

то эти настройки терялись в Selenide 6.0.x
Теперь мы их восстановили. 


См. [issue 1626](https://github.com/selenide/selenide/issues/1626),
[issue 1630](https://github.com/selenide/selenide/issues/1630) и
[issue 1631](https://github.com/selenide/selenide/issues/1631).

Исправление в [PR 1642](https://github.com/selenide/selenide/pull/1642).


<br>
# ВАЖНО

Если вы использовали `Configuration.browserCapabilities`, то с большой вероятностью заворачивали 
их в `DesiredCapabilities`:

```java
ChromeOptions options = new ChromeOptions();
options.addArguments(...);

DesiredCapabilities caps = new DesiredCapabilities();
caps.setCapability(ChromeOptions.CAPABILITY, options);
Configuration.browserCapabilities = caps;
```

Так вот, теперь этот **код нужно упростить**, чтобы настройки больше не терялись:
```java
ChromeOptions options = new ChromeOptions();
options.addArguments(...);
Configuration.browserCapabilities = options;
```

<br>
# Поменяли тип параметра в `WebDriverProvider` 

... с `DesiredCapabilities` на просто `Capabilities`. 

Для вас почти ничего не меняется. Если вы используете в своих тестах `WebDriverProvider`, просто 
поменяйте `DesiredCapabilities` на `Capabilities`, и всё будет по-старому. 

См. [PR 1642](https://github.com/selenide/selenide/pull/1642).

<br>

_Больше капабилитей богу капабилитей!_

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
