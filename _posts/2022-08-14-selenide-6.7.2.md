---
layout: post
title: "Вышла Selenide 6.7.2"
description: ""
category:
header-text: "Памятное головотяпство"
tags: []
---
{% include JB/setup %}

<br>
# Привет!

<br>
Мы выпустили мини-релиз [Selenide 6.7.2](https://github.com/selenide/selenide/milestone/162?closed=1) с исправлением 
утечек памяти. 

Да-да, мы серьёзные ребята, у нас тоже бывают утечки.

Но не пугайтесь, они некритические. Вряд ли кто-то из вас их вообще замечал.

### Исправили утечки с shutdown hooks в Selenide {#fix-selenide-memory-leak}

Если в тесте много-много раз открывать и закрывать вебдрайвер
```java
for (int i = 0; i < 1000; i++) {
  open("about:blank");
  closeWebDriver();
}
```

то расход памяти потихоньку растёт:

<img src="https://user-images.githubusercontent.com/279773/184475079-bbf8ee0f-d245-43ec-8e72-a010262e099c.png"
     style="width: 100%" alt="Memory consumption: before"/>

_Красная линия, ты где?_

А вот что случилось на самом деле.

Это просто сдетонировало несколько shutdown хуков, которые селенид складировал для каждого открытого вебдрайвера. 

См. [issue 1917](https://github.com/selenide/selenide/issues/1917)
и [PR 1919](https://github.com/selenide/selenide/pull/1919).

После обновления на версию 6.7.2 память больше не растёт:

<img src="https://user-images.githubusercontent.com/279773/184499249-f6e1e3cb-bc88-4c04-8a7b-a080f3f08887.png"
     style="width: 100%" alt="Memory consumption: after"/>

_Обновляемся на Selenide 6.7.2, выдыхаем и идём на пляж._

<br>

### Исправили утечку в LittleProxy {#fix-little-proxy-memory-leak}

Мы обновились на версию LittleProxy 2.0.11, в которой была исправлена ещё одна утечка памяти.

См. [PR 1918](https://github.com/selenide/selenide/pull/1918)
и [PR 141](https://github.com/LittleProxy/LittleProxy/pull/141)

<br>

### Обновились на Selenium 4.4.0 {#upgrade-to-selenium-4.4.0}

в котором даже есть одно лично моё исправление, так-то! Которое, кстати, помогло нам исправить и следующую проблему.

См. [PR 1913](https://github.com/selenide/selenide/pull/1913)
и [Selenium changelog](https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG)

<br>

### Исправили плагин `full-size-screenshot` {#fix-full-size-screenshot}

В нашем новом плагине `full-size-screenshot` была одна известная проблема (на самом деле вызванная багой в селениуме):
если вы запускаете браузер удалённо и открываете несколько вкладок или окон, то селенид мог взять скриншот не с того окна.

Эта ошибка была исправлена в Selenium 4.4.0, и соответственно, у нас она теперь тоже исправится.

См. [PR 1920](https://github.com/selenide/selenide/pull/1920) и [PR 10811](https://github.com/SeleniumHQ/selenium/pull/10811).

<br>


### Ссылки {#news}

* Статья [Working Efficiently with Selenide](https://blogs.perficient.com/2022/06/22/working-efficiently-with-selenide-the-subset-of-selenium-webdriver/) by Zainab Firdos, 22.06.2022
* Серия руководств [Selenide Tutorial Series](https://dev.to/automationbro/selenide-tutorial-series-58p5) by Dilpreet Johal, 13.06.2022
* Видео-руководство [Selenide Java Tutorial Series](https://www.youtube.com/watch?v=0vlV8_4EDAg&t=318s&ab_channel=AutomationBro-DilpreetJohal) by Automation Bro, 13.06.2022
* Статья [How to Start Your Friendship with Selenide](https://hackernoon.com/how-to-start-your-friendship-with-selenide) by Miki Szeles, 30.03.2022 
* Оффтопик: моё выступление на типа открытом микрофоне [про поездки на конференции в Киев](https://youtu.be/AOBEqZ0T51c) - "Твой выход", 23.07.2022, Таллинн

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
