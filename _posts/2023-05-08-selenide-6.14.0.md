---
layout: post
title: "Вышла Selenide 6.14.0"
description: ""
category:
header-text: "Полный вперёд!"
tags: []
---
{% include JB/setup %}

Привет!

Пока не начался контрнаступ, давайте-ка обновимся на [Selenide 6.14.0](https://github.com/selenide/selenide/milestone/181?closed=1) - а то потом будет не до него.

В нём есть несколько изменений, которые как будто не очень большие, но могут чего-нибудь сломать. 
_Поэтому очень советую не оттягивать и **обновиться сейчас**._ 

* [Ускорили дебаг](#speedup-debug)
* [Убрали флажок `--no-sandbox`](#remove-flag--no-sandbox)
* [Добавили метод `step` для отчётиков](#add-step-method)
* [Добавили метод `$.dragAndDrop(DragAndDropOptions)`](#drag-and-drop-with-options)
* [Браузер за экран](#allow-negative-browser-position)
* [Обновили зависимости](#update-dependencies)
* [Новости](#news)
* [Статистика](#statistics)
  {: .blogpost-menu}
  <br>

### Ускорили дебаг {#speedup-debug}

Когда дебажишь свой тест и останавливаешься на брейкпойнте, иногда можно заметить, что IDE очень долго отображаешь 
значения полей в пэджобжекте. Вот в таком состоянии IDE может подвиснуть надолго: 

<img src="{{ BASE_PATH }}/images/2023/05/selenide-debug.slow.png" alt="Selenide. debug. slow." width="600px">

Причина в том, что для отображения каждого поля Selenide обращается к вебдрайверу,
чтобы получить имя тэга, актуальный текст и атрибуты элемента. Зато через некоторое время вы могли увидеть актуальную картинку: 

<img src="{{ BASE_PATH }}/images/2023/05/selenide-debug.slow.result.png" alt="Selenide. debug. slow. result."  width="600px">

Теперь этот процесс должен сильно ускориться. Селенид больше не будет обращаться к вебдрайверу, а просто покажет локатор элемента:

<img src="{{ BASE_PATH }}/images/2023/05/selenide-debug.fast.png" alt="Selenide. debug. slow. result."  width="600px">

Но и формат метода `$.toString()` / `$$.toString()` тоже изменился. Будьте готовы.

См. [issue 2253](https://github.com/selenide/selenide/issues/2253).
и [PR 2269](https://github.com/selenide/selenide/pull/2269).

> Но не переживайте, это всё касается только дебага. 
> При падении теста вы по-прежнему будете получать полную информацию об элементе с блекджектом и скриншотами.
<br>

### Убрали флажок хрома `--no-sandbox` {#remove-flag--no-sandbox}

История с этим флажком мутная. Лично я не вижу никакой разницы, запускать хром с ним или без него.

Но
1. Некоторые пользователи говорят, что без флажка `--no-sandbox` хром не запускается в докере
2. А другие пользователи говорят, что с флажком `--no-sandbox` процесс хрома остаётся висеть в фоне и пожирает весь CPU. Но это вроде только на винде (?) 

В общем, мы убрали этот флажок, потому что пользователям №1
* легко обнаружить проблему (хром тупо не запускается)
* легко добавить его самостоятельно:
```java
Configuration.browserCapabilities = 
    new ChromeOptions().addArguments("--no-sandbox");
```

См. [issue 2270](https://github.com/selenide/selenide/issues/2270) и [PR 2271](https://github.com/selenide/selenide/pull/2271).

<br>

### Добавили метод `step` для отчётиков {#add-step-method}

Если вы используете селенидовский встроенный отчёт (`TextReport`), то теперь можете группировать действия в "шаги" 
с помощью нового метода `step`:

```java
@Test
void authentication() {
  step("login",()->{
    open("/login.asp");
    $("#username").val("u");
    $("#password").val("p");
  });

  step("logout",()->{
    $("#logout").click();
    $("#goodBye").shouldHave(text("Good bye looser!"));
  });
}
```

В отчёте шаги будут визуально выделяться. 
```text
+---------------+-----------------------------------------------+-------+------+
| Element       |Subject                                        |Status | ms.  |
+---------------+-----------------------------------------------+-------+------+
| login         |                                               |PASS   | 4000 |
|    open       | http://127.0.0.1:8080/my_account/account.html |PASS   | 2662 |
|    #username  | val "u"                                       |PASS   | 300  |
|    #password  | val "p"                                       |PASS   | 400  |
| logout        |                                               |PASS   | 1023 |
|    #logout    | click                                         |PASS   | 923  |
|    #goodBye   | should have text "Good bye looser!"           |PASS   | 100  |
+---------------+-----------------------------------------------+-------+------+
```

Кстати, шаги могут быть вложенными друг в друга. 

См. [issue 2172](https://github.com/selenide/selenide/issues/2172).
Спасибо [Maksim @Au6ojlut](https://github.com/Au6ojlut) за [PR 2250](https://github.com/selenide/selenide/pull/2250).

<br>

### Добавили метод `$.dragAndDrop(DragAndDropOptions)` {#drag-and-drop-with-options}

Теперь метод `$.dragAndDrop` приобрёл более логичное звучание: сначала "что", потом "куда" и наконец, "как". 

```java
$("#drag1").dragAndDrop(to("#div2"));
$("#drag1").dragAndDrop(to("#div2").usingJS());
```

Спасибо [Maksim @Au6ojlut](https://github.com/Au6ojlut) за [PR 2245](https://github.com/selenide/selenide/pull/2245).

<br>

### Разрешили двигать браузер за экран {#allow-negative-browser-position}

Исправили мелкую багу, из-за которой нельзя было проставить негативные значения в позиции браузера:

```java
Configuration.browserPosition = "-1900x-450";
```

Слабо себе представляю, зачем это может быть полезно, но исправили. 

См. [issue 2258](https://github.com/selenide/selenide/issues/2258) и [PR 2259](https://github.com/selenide/selenide/pull/2259).

<br>

### Путь к бинарнику Edge {#support-edge-binary-location}

В селениде есть настройка `Configuration.browserBinary`, позволяющая задать путь к бинарнику браузера.
(на всякий случай: в большинстве случаев её _не нужно_ задавать).

Раньше эта настройка не поддерживалась для браузера Edge, а теперь поддерживается. Ура. 

Спасибо [Vladislav Velichko](https://github.com/vlad8x8) за [PR 2267](https://github.com/selenide/selenide/pull/2267).

<br>

### Обновили зависимости {#update-dependencies}

* [Selenium 4.9.1](https://github.com/selenide/selenide/pull/2277) - см. [ченджлог](https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG)
* [Netty 4.1.92.Final](https://github.com/selenide/selenide/pull/2263)

<br>

### Новости {#news}

* Серия уроков [Selenide Java with Cucumber](https://www.youtube.com/playlist?list=PLFGzDEkV3ACu0i-Gd_whXsspqDlmP3ymP) от [TechPro Education](https://www.youtube.com/@TechProEducationUS)
* Обзор [Jetbrains Aqua для автоматизации тестирования](https://www.youtube.com/watch?v=vUTQyr2UF0M&ab_channel=OlehPendrak) от [Oleh Pendrak](https://www.youtube.com/@threadqa)

<br>

### Статистика {#statistics}

Количество ежемесячных скачиваний Селенида перевалило за 600 тыщ!

<center>
  <img src="{{ BASE_PATH }}/images/2023/04/selenide.downloads.jpg" width="800"/>
</center>

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
