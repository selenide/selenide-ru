---
layout: post
title: "Вышла Selenide 6.19.0"
description: ""
category:
header-text: "Ипучая действительность"
tags: []
---
{% include JB/setup %}

Всем привет! 
На излёте сентября вы выкатили [Selenide 6.19.0](https://github.com/selenide/selenide/milestone/192?closed=1).

> Можешь сплетничать, ненавидеть, регистрировать баги, и обсуждать в чате.
> Но мы же оба понимаем, что при встрече ты будешь мне мило слать пулреквест. 

* [Новый метод `$.highlight()`](#add-highlight-method)
* [Убираем невидимые пробелы в текстах коллекций](#strip-invisible-spaces-in-collections)
* [Обновились на Selenium 4.13.0](#upgrade-to-selenium-4.13.0)
* [Убрали строгую проверку на "/wd/hub"](#remove-hub-url-check)
* [Заменили `ElementsContainer` на `Container`](#replace-elements-container-by-container)
* [Методы `$.tap()`, `$.doubleTap()` для мобилок](#tap-double-tap)
* [Селектор по классу и индексу для мобилок](#add-selector-by-class-and-index)
* [Новости](#news)
{: .blogpost-menu}
  <br>

### Новый метод `$.highlight()` для подсветки элемента {#add-highlight-method}
Чувствую, открываем очередной ящик Пандоры, но что поделать.

В общем, мы добавили метод для подсветки элемента.

#### Зачем это надо?
Честно говоря, незачем. :)  
* Когда у вас тесты автоматически бегают на CI, никто на них смотреть не должен, и подсвечивать ничего не нужно.
* Но вот если надо сделать крутое демо на конференции или просто показать коллегам - тут подсветка может пригодиться. 
Или, скажем, когда вы дебажите какой-то тест, сложный случай, когда непонятно, что куда кликается.  

#### Как именно он подсвечивается?
На данный момент есть два варианта подсветки: цветным фоном (по умолчанию) или рамкой.

```java
import static com.codeborne.selenide.HighlightOptions.*;

$("h1").highlight();              // по умолчанию - background()
$("h1").highlight(background());  // цветной фон
$("h1").highlight(border());      // цветная рамка
```

Фону и рамке можно задать свои стили:
```java
$("h1").highlight(background("rgb(85, 180, 250);"));
$("h1").highlight(border("3px solid blue"));
```

А можно и задать полностью крафтовый стиль для выделения элемента:
```java
$("h1").highlight(style("color: white; background-color: red;"));
```
<br>

####  Дальнейшее развитие
Пока что метод подсвечивает только тот элемент, который вы скажете. 
В будущем, наверное, стоит добавить автоматическую подсветку каждого элемента, с которым происходит взаимодействие. Как раз 
такая подсветка позволит и демо эффектное сделать, и плавающую ошибку подебажить. 

В общем, делитесь идеями, будем думать.

См. [issue 1277](https://github.com/selenide/selenide/issues/1277), [issue 2395](https://github.com/selenide/selenide/issues/2395) и
[PR 2481](https://github.com/selenide/selenide/pull/2481).

<br>

### Убираем невидимые пробелы в текстах коллекций {#strip-invisible-spaces-in-collections}

Как вы помните, в Selenide 6.16.0 мы [ускорили работу с коллекциями](/2023/07/02/selenide-6.16.0/#speedup-collection-checks) 
с помощью вставок JavaScript кода. Оказалось, что при этом мы чуть изменили поведение для элементов, содержащих 
невидимые пробелы и прочие хитрые символы.

Допустим, у нас на страничке есть такой элемент:
```html
<div id="status">
  <span> Боевой дух</span>
  <span>  ипучая&nbsp;\u200Bдействительность  </span>
</div>
```

И раньше проверка типа 
```java
$$("#status span").shouldHave(texts("Боевой дух", "ипучая действительность"));
```
падала:

```java
Expected :[Боевой дух, ипучая действительность]
Actual   :[Боевой дух, ипучая действительность]
```

Причём выглядит сообщение так, как будто тексты одинаковые. Но в первой строке - обычный пробел, а во второй - невидимый пробел "`​`".

Теперь же селенид будет вычищать такие невидимые пробелы. 
Правильно это или нет, можно спорить, но так велит нам стандарт WebDriver, и так работает Selenium. И мы тоже будем соответствовать.

См. [issue 2469](https://github.com/selenide/selenide/issues/2469) и [PR 2482](https://github.com/selenide/selenide/pull/2482).  
Спасибо [Maksim Au6ojlut](https://github.com/Au6ojlut) за [подсказку с чёртовыми пробелами](https://github.com/selenide/selenide/issues/2469#issuecomment-1721584046).

<br>

### Обновились на Selenium 4.13.0 {#upgrade-to-selenium-4.13.0}

Обновили Selenium с 4.12.1 на 4.13.0  
Вот тут его [ченджлог](https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG).  

Несколько важных багфиксов, но всё ещё бегает на Java8. Ловите, пока он не стал требовать Java 11+! ;)

См. [PR 2479](https://github.com/selenide/selenide/pull/2479).

<br>

### Убрали строгую проверку на "/wd/hub" {#remove-hub-url-check}

Если вы используете Selenoid, то раньше плагин `selenide-selenoid` проверял, чтобы URL заканчивался строкой `/wd/hub`.
Оказалось, что URL бывает и другим, и поэтому мы эту проверку убрали. 

См. [issue 2475](https://github.com/selenide/selenide/issues/2475).  
Спасибо [Dmitry Plodukhin](https://github.com/Plodick) за [PR 2476](https://github.com/selenide/selenide/pull/2476).

<br>

### Заменили класс `ElementsContainer` на интерфейс `Container` {#replace-elements-container-by-container}

Как вы помните, недавно мы [запретили пэдж обжектам](/2023/09/06/selenide-6.18.0/#no-elements-container-for-page-object) наследоваться от `ElementsContainer`.

Такой вариант больше не работает:
```java
class LoginPage extends ElementsContainer {
}
```

Я по-прежнему настаиваю, что это не нужно, но нашлись такие проекты, где это необходимо из-за текущего наследия и невозможности всё переписать.
Для таких проектов мы добавили интерфейс `Container`:
```java
class LoginPage implements Container {
}
```

Для обычных виджетов тоже рекомендуется поменять `extends ElementsContainer` на `implements Container`. 

Разница только в том, что это интерфейс, а не абстрактный класс (надо писать "implements" вместо "extends"), и в нём не будет метода `getSelf()`. 
Ну и не надо.

См. [issue 2439](https://github.com/selenide/selenide/issues/2439) и [PR 2465](https://github.com/selenide/selenide/pull/2465).

<br>


### Добавили методы `$.tap()`, `$.doubleTap()` для мобилок {#tap-double-tap}

```java
import static com.codeborne.selenide.appium.SelenideAppium.$;

$(By.name("ComputeSumButton")).tap();
$(AppiumBy.xpath("//android.widget.Button")).doubleTap();
$(AppiumBy.xpath(".//*[@text='Лютая арта']")).tap(longPressFor(ofSeconds(4)));

```
Спасибо [qwez](https://github.com/qwez) за [PR 2467](https://github.com/selenide/selenide/pull/2467).

<br>


### Добавили селектор по классу и индексу для мобилок {#add-selector-by-class-and-index}

```java
import static com.codeborne.selenide.appium.AppiumSelectors.byClassNameAndIndex;
import static com.codeborne.selenide.appium.SelenideAppium.$;

$(byClassNameAndIndex("android.widget.TextView", 7)).tap();
```
Спасибо [Amuthan Sakthivel](https://github.com/amuthansakthivel) за [PR 2440](https://github.com/selenide/selenide/pull/2440).

<br>

### Новости {#news}

* [Selenium logger](https://github.com/titusfortner/selenium-logger) - новый проект от Titus Fortner
* [Introduction to Selenide](https://www.baeldung.com/selenide) - Исторический момент! Пост на легендарном сайте Baeldung.
* [Selenide appium](https://www.youtube.com/watch?v=C8rbEuvvg0I&ab_channel=LambdaTest) - Видос с последней конференции LambdaTest от Amuthan Sakthivel
* [Selenide test automation: using Selenoid in docker](https://intexsoft.com/blog/selenide-test-automation-using-selenoid-in-the-docker-container/) by Dora & Margarita
* [Things to keep in mind when using Selenide](https://zenn.dev/ragnar1904/articles/selenide-essentials) - пост на японском от nilwurtz
* [Intro to Selenide](https://updates4devs.com/intro-to-selenidebaeldung/?feed_id=28562) By Updates4Devs.com
* [Non-static Selenide: пробуем жить с selenide-core и что это нам даст](https://www.youtube.com/watch?v=FZA5PGxPzR0&t=156s&ab_channel=QAGURU) - интересная нетривиальная тема от Дмитрий Тучс
* [Почему наследование в автотестах это антипаттерн?](https://www.linkedin.com/pulse/%2525D0%2525BF%2525D0%2525BE%2525D1%252587%2525D0%2525B5%2525D0%2525BC%2525D1%252583-%2525D0%2525BD%2525D0%2525B0%2525D1%252581%2525D0%2525BB%2525D0%2525B5%2525D0%2525B4%2525D0%2525BE%2525D0%2525B2%2525D0%2525B0%2525D0%2525BD%2525D0%2525B8%2525D0%2525B5-%2525D0%2525B2-%2525D0%2525B0%2525D0%2525B2%2525D1%252582%2525D0%2525BE%2525D1%252582%2525D0%2525B5%2525D1%252581%2525D1%252582%2525D0%2525B0%2525D1%252585-%2525D1%25258D%2525D1%252582%2525D0%2525BE-%2525D0%2525B0%2525D0%2525BD%2525D1%252582%2525D0%2525B8%2525D0%2525BF%2525D0%2525B0%2525D1%252582%2525D1%252582%2525D0%2525B5%2525D1%252580%2525D0%2525BD-ruslan-galliamov%3FtrackingId=klEJOeEYQ2K2mix0G2%252F9mQ%253D%253D/?trackingId=klEJOeEYQ2K2mix0G2%2F9mQ%3D%3D) - пост (не про Selenide) от Ruslan Galliamov

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
