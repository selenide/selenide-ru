---
layout: post
title: "Вышла Selenide 7.0.1"
description: ""
category:
header-text: "Циклы возвращаются"
tags: []
---
{% include JB/setup %}
 
Вчера мы выпустили [Selenide 7.0.0](/2023/10/25/selenide-7.0.0/) и, честно говоря, я ожидал волны жалоб насчёт Java 17.

Но нет. На Java 17 никто пока не жаловался. И это здорово! Все обновили джаву, все молодцы.   
Но зато люди очень просили обратно циклы по коллекциям. 

Так и быть, в сегодняшнем [Selenide 7.0.1](https://github.com/selenide/selenide/milestone/194?closed=1) мы кое-что вернули:

* [Вернули циклы по коллекциям](#restore-collection-loop)
* [Вернули метод `isEmpty()` у коллекций](#restore-collection-is-empty)
* [Вернули поле `self` в контейнерах](#restore-self-in-containers)
* [Переименовали `CollectionCondition` в `WebElementsCondition`](#rename-collection-condition)
* [UPD 7.0.2: Обновились на Selenium 4.15.0](#upgrade-to-selenium-4.15.0)

<br>

### Вернули циклы по коллекциям {#restore-collection-loop}

Теперь вы можете снова использовать `for` по коллекциям:
```java
for (SelenideElement element : $$(".element")) {
  element.shouldBe(visible);
}
```

А я не устану повторять, что 
> НЕ НАДО ТАК ДЕЛАТЬ!

[Не используйте циклы и условия в тестах!](https://github.com/selenide/selenide/wiki/do-not-use-getters-in-tests)

Если вы хотите собрать в кучу тексты или атрибуты всех элементов, чтобы потом и проверить, то для этого есть т.н. 
"collection condition":
```java
  $$(".errors").shouldHave(texts("One", "Two", "Three"));

  $$("#numbers option").shouldHave(attributes("value",
                   "one", "two", "three", "four", "five"));
```

А если вы не нашли готовой проверки под ваши нужды, легко можете [написать свою](https://github.com/selenide/selenide/wiki/Custom-collection-conditions).
Просто создайте класс от `WebElementsCondition` и реализуйте в нём метод `check`. Ну изи же. 
И сможете его переиспользовать в куче своих тестов.

См. [PR 2533](https://github.com/selenide/selenide/pull/2533).

<br>

### Вернули метод `isEmpty()` у коллекций {#restore-collection-is-empty}

Мне по-прежнему непонятно - зачем, но зачем-то люди используют этот метод:
```java
  boolean errorsFound = $$(".error").isEmpty();
```

См. [PR 2533](https://github.com/selenide/selenide/pull/2533).

<br>

### Вернули поле `self` в контейнерах {#restore-self-in-containers}

В релизе 7.0.0 мы удалили класс `ElementsContainer`, а с ним пропал и метод `getSelf()`. 
Я всё ещё нахожу его странным, но почему-то люди его используют. 

Если это про вас, то вы можете заменить метод `getSelf()` на поле с аннотацией `@Self`:

```java
static class RadioButton implements Container {
  @Self
  SelenideElement label;

  @FindBy(tagName = "input[type=radio]")
  SelenideElement input;
}
```

См. [PR 2534](https://github.com/selenide/selenide/pull/2534).

<br>

### Переименовали `CollectionCondition` в `WebElementsCondition` {#rename-collection-condition}

Вас это коснётся, только если вы писали [самодельные проверки для коллекций](https://github.com/selenide/selenide/wiki/Custom-collection-conditions). 

Не беда, просто поменяйте `extends CollectionCondition` на `WebElementsCondition`. 

См. [issue 2372](https://github.com/selenide/selenide/issues/2372) и [PR 2533](https://github.com/selenide/selenide/pull/2533).

<br>

### UPD 7.0.2: Обновились на Selenium 4.15.0 {#upgrade-to-selenium-4.15.0}

Позже мы выпустили Selenide 7.0.2 с обновлением на последний Selenium 4.15.0

Тут [ченджлог селениума](https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG).

См. [PR 2540](https://github.com/selenide/selenide/pull/2540).

<br>

[Андрей Солнцев](http://asolntsev.github.io/)

ru.selenide.org
